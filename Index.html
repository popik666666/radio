<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Doplň vtip – hra</title>
<style>
  body {
    background: radial-gradient(circle at top, #101522, #1b2136);
    color: #e0e0e0;
    font-family: 'Poppins', sans-serif;
    text-align: center;
    padding: 30px 20px;
    user-select: none;
  }
  #vtip {
    font-size: 1.9em;
    margin: 30px 0 40px;
    min-height: 120px;
    font-weight: 600;
    color: #ffcb6b;
    text-shadow: 1px 1px 6px rgba(255,203,107,0.7);
  }
  #moznosti button {
    margin: 12px 15px;
    padding: 14px 28px;
    font-size: 1.3em;
    cursor: pointer;
    border-radius: 8px;
    border: 2px solid #ffcb6b;
    background: transparent;
    color: #ffcb6b;
    min-width: 150px;
    font-weight: 600;
    transition: 0.3s;
  }
  #moznosti button:hover:not(.disabled) {
    background: #ffcb6b;
    color: #121726;
    transform: scale(1.06);
  }
  button.disabled {
    cursor: default;
    opacity: 0.5;
  }
  button.correct {
    background: #27ae60 !important;
    color: white !important;
    border-color: #27ae60 !important;
  }
  button.wrong {
    background: #c0392b !important;
    color: white !important;
    border-color: #c0392b !important;
  }
  #info {
    font-size: 1.3em;
    margin: 15px 0 25px;
    display: flex;
    justify-content: center;
    gap: 40px;
    font-weight: 600;
  }
  #endScreen {
    display: none;
    margin-top: 50px;
  }
  input#playerName {
    font-size: 1.2em;
    padding: 10px;
    width: 80%;
    border-radius: 8px;
    border: none;
    margin-bottom: 15px;
    text-align: center;
  }
</style>
</head>
<body>

<div id="info">
  <div id="questionTimerDisplay">Čas: 40 s</div>
  <div id="lives">Životy: 5</div>
  <div id="score">Skóre: 0</div>
</div>

<div id="vtip">Načítání vtipů...</div>
<div id="moznosti"></div>

<div id="endScreen">
  <h2>Konec hry!</h2>
  <p>Tvé skóre: <span id="finalScore">0</span></p>
  <input id="playerName" placeholder="Zadej své jméno" maxlength="20" />
  <br>
  <button id="saveScore">Uložit skóre</button>
  <button id="restartGame">Hrát znovu</button>
</div>

<script>
(() => {
  const vtipy = [
  
 
  {text:"Co řekl nula osmičce? – ___ máš pěkný!",answer:"pásek",wrong:["opasek","řemen","šála"]},
  {text:"Proč je počítač studený? Protože má ___.",answer:"Windows",wrong:["Linux","BIOS","chladič"]},
  {text:"Co dělá policajt v hnízdě? Hlídá ___.",answer:"vejce",wrong:["písek","mláďata","kámen"]},
  {text:"Co se rozbije, když to řekneš? ___.",answer:"Ticho",wrong:["Sklo","Hlas","Zvuk"]},
  {text:"Proč mají žirafy dlouhý ___? Aby dosáhly na listy.",answer:"krk",wrong:["jazyk","ocas","nos"]},
  {text:"Co řekne jedna zeď druhé? ___",answer:"Potkáme se v rohu",wrong:["Zůstaň stát","Jsi zdi","Do rohu!"]},
  {text:"Jaké je nejoblíbenější ovoce programátorů? ___.",answer:"jablko",wrong:["banán","hruška","malina"]},
  {text:"Co má 4 nohy a neumí chodit? ___.",answer:"stůl",wrong:["židle","socha","lavice"]},
  {text:"Proč nemůže kostlivec hrát na housle? Protože nemá ___.",answer:"šlachy",wrong:["ruce","svaly","kůži"]},
  {text:"Jaký je rozdíl mezi učitelem a magnetem? Magnet ___ přitahuje.",answer:"kovy",wrong:["žáky","papír","židle"]},
  {text:"Jak se jmenuje nejmenší pes? ___.",answer:"Čivava",wrong:["Mops","Baset","Pinč"]},
  {text:"Co dělá slon na kole? ___.",answer:"jede",wrong:["padá","píská","spí"]},
  {text:"Jaký je nejrychlejší zvíře? ___.",answer:"Gepard",wrong:["Lev","Tygr","Zebra"]},
  {text:"Jaké je nejoblíbenější jídlo duchů? ___.",answer:"Strašidlo",wrong:["duchle","guláš","špagety"]},
  {text:"Jaký nápoj pije strom? ___.",answer:"kořenové pivo",wrong:["vodu","mléko","čaj"]},
  {text:"Proč je sněhulák šťastný? Protože má studené ___.",answer:"nervy",wrong:["ruce","nohy","uši"]},
  {text:"Co se stane, když hodíš notebook z okna? Máš ___.",answer:"Windows",wrong:["Apple","Linux","pád"]},
  {text:"Jak se jmenuje pes, co nosí brýle? ___.",answer:"Štěkotka",wrong:["Okoň","Fokus","Zrak"]},
  {text:"Jaké auto má duch? ___.",answer:"průhledné",wrong:["neviditelné","bílý vůz","duchem"]},
  {text:"Co má sýr a programátor společné? Oba mají ___.",answer:"chyby",wrong:["díry","drahý život","myš"]},
  {text:"Proč nemůže tučňák žít v poušti? Protože nemá ___.",answer:"klimatizaci",wrong:["vodu","písek","opalovací krém"]},
  {text:"Co řekne mrkev, když ji někdo vytáhne ze země? ___.",answer:"To byl kořen problému",wrong:["Au!","Jsem venku","Země mě držela"]},
  {text:"Jaký je oblíbený tanec robotů? ___.",answer:"mechanický valčík",wrong:["šroubový twist","bitový breakdance","čipová samba"]},
  {text:"Proč je kniha smutná? Protože má moc ___.",answer:"kapitol",wrong:["stránek","písmen","čtenářů"]},
  {text:"Co dělá matematika na večírku? ___.",answer:"počítá s tím",wrong:["tančí","mlčí","odchází"]},
  {text:"Jak se jmenuje kočka, co programuje? ___.",answer:"Kódka",wrong:["Mňaukodér","Softmeow","Purrgramátor"]},
  {text:"Proč nemůže telefon běžet? Protože má ___.",answer:"pauzu",wrong:["baterku","SIMku","zvonění"]},
  {text:"Jaký je nejoblíbenější sport duchů? ___.",answer:"strašiball",wrong:["duchbal","skrytý běh","let"]},
  {text:"Co řekne toast, když je hotový? ___.",answer:"Jsem křupavý!",wrong:["Jsem připraven","Jsem horký","Jsem spálený"]},
  {text:"Proč je ryba špatný programátor? Protože se bojí ___.",answer:"sítě",wrong:["myši","klávesnice","monitoru"]},
  {text:"Jak se jmenuje pes, co umí zpívat? ___.",answer:"Štěkaráda",wrong:["Zpěvák","Hafík","Tenor"]},
  {text:"Co dělá slunce, když má volno? ___.",answer:"opalí se",wrong:["zapadne","svítí","odpočívá"]},
  {text:"Proč je mravenec silný? Protože má ___.",answer:"kolektiv",wrong:["svaly","tvrdou práci","malé tělo"]},
  {text:"Proč nemůže duch jít do kina? Protože je ___.",answer:"neviditelný",wrong:["strašidelný","průhledný","mimo"]},
  {text:"Jak se jmenuje nejveselejší zelenina? ___.",answer:"smíšek",wrong:["okurka","mrkev","hrášek"]},
  {text:"Co řekne židle stolu? ___.",answer:"Držím tě",wrong:["Sedni si","Jsem pod tebou","Stojím za tebou"]},
  {text:"Proč je počítač nervózní? Protože má moc ___.",answer:"procesů",wrong:["dat","uživatelů","virů"]},
  {text:"Jaký je oblíbený sport klávesnice? ___.",answer:"běh po znacích",wrong:["enterball","shiftování","spacehop"]},
  {text:"Co dělá banán, když je smutný? ___.",answer:"oloupe se",wrong:["zhnědne","pláče","klouže"]},
  {text:"Jaký je oblíbený film programátorů? ___.",answer:"Kódátor",wrong:["Matrix","Bitva","Hackeři"]},
  {text:"Proč je žárovka chytrá? Protože má ___.",answer:"nápad",wrong:["světlo","vlákno","energie"]},
  {text:"Co řekne klíč ke zámku? ___.",answer:"Odemknu tě",wrong:["Jsem tvůj","Zavři se","Ztratil jsem se"]},
  {text:"Jaký je oblíbený tanec elektronu? ___.",answer:"spin",wrong:["valčík","skok","kmit"]},
  {text:"Proč je tužka smutná? Protože ji ___.",answer:"ořezali",wrong:["ztratili","zlomili","nepoužili"]},
  {text:"Co dělá knoflík, když je nervózní? ___.",answer:"zapne se",wrong:["odpadne","zčervená","zaskřípe"]},
  {text:"Jaký je oblíbený sport žárovek? ___.",answer:"svícení",wrong:["blikání","zhasínání","rozsvěcení"]},
  {text:"Proč je káva unavená? Protože ___.",answer:"už byla vypita",wrong:["je horká","je silná","je hořká"]},
  {text:"Co řekne myš počítači? ___.",answer:"Táhnu tě",wrong:["Klikám","Jsem tvůj","Zavřu tě"]},
    {text:"Co řekl nula osmičce? – ___ máš pěkný!",answer:"pásek",wrong:["opasek","řemen","šála"]},
    {text:"Proč je počítač studený? Protože má ___.",answer:"Windows",wrong:["Linux","BIOS","chladič"]},
    {text:"Co dělá policajt v hnízdě? Hlídá ___.",answer:"vejce",wrong:["písek","mláďata","kámen"]},
    {text:"Co se rozbije, když to řekneš? ___.",answer:"Ticho",wrong:["Sklo","Hlas","Zvuk"]},
    {text:"Proč mají žirafy dlouhý ___? Aby dosáhly na listy.",answer:"krk",wrong:["jazyk","ocas","nos"]},
    {text:"Co řekne jedna zeď druhé? ___",answer:"Potkáme se v rohu",wrong:["Zůstaň stát","Jsi zdi","Do rohu!"]},
    {text:"Jaké je nejoblíbenější ovoce programátorů? ___.",answer:"jablko",wrong:["banán","hruška","malina"]},
    {text:"Co má 4 nohy a neumí chodit? ___.",answer:"stůl",wrong:["židle","socha","lavice"]},
    {text:"Proč nemůže kostlivec hrát na housle? Protože nemá ___.",answer:"šlachy",wrong:["ruce","svaly","kůži"]},
    {text:"Jaký je rozdíl mezi učitelem a magnetem? Magnet ___ přitahuje.",answer:"kovy",wrong:["žáky","papír","židle"]},
    {text:"Jak se jmenuje nejmenší pes? ___.",answer:"Čivava",wrong:["Mops","Baset","Pinč"]},
    {text:"Co dělá slon na kole? ___.",answer:"jede",wrong:["padá","píská","spí"]},
    {text:"Jaký je nejrychlejší zvíře? ___.",answer:"Gepard",wrong:["Lev","Tygr","Zebra"]},
    {text:"Jaké je nejoblíbenější jídlo duchů? ___.",answer:"Strašidlo",wrong:["duchle","guláš","špagety"]},
    {text:"Jaký nápoj pije strom? ___.",answer:"kořenové pivo",wrong:["vodu","mléko","čaj"]},
    {text:"Proč je sněhulák šťastný? Protože má studené ___.",answer:"nervy",wrong:["ruce","nohy","uši"]},
    {text:"Co se stane, když hodíš notebook z okna? Máš ___.",answer:"Windows",wrong:["Apple","Linux","pád"]},
    {text:"Jak se jmenuje pes, co nosí brýle? ___.",answer:"Štěkotka",wrong:["Okoň","Fokus","Zrak"]},
    {text:"Jaké auto má duch? ___.",answer:"průhledné",wrong:["neviditelné","bílý vůz","duchem"]},
    {text:"Co má sýr a programátor společné? Oba mají ___.",answer:"chyby",wrong:["díry","drahý život","myš"]}
    
  ];
  let score = 0;
  let lives = 5;
  const maxLives = 5;
  let timePerQuestion = 40;
  let timerId;
  let used = [];

  const questionTimerDisplay = document.getElementById("questionTimerDisplay");
  const livesDisplay = document.getElementById("lives");
  const scoreDisplay = document.getElementById("score");
  const vtipDisplay = document.getElementById("vtip");
  const moznostiDisplay = document.getElementById("moznosti");
  const endScreen = document.getElementById("endScreen");
  const finalScoreDisplay = document.getElementById("finalScore");
  const playerNameInput = document.getElementById("playerName");
  const saveScoreBtn = document.getElementById("saveScore");
  const restartBtn = document.getElementById("restartGame");

  const soundCorrect = new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');
  const soundWrong = new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg');

  function shuffle(a) {
    for(let i = a.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
  }

  function startTimer() {
    let t = timePerQuestion;
    questionTimerDisplay.textContent = `Čas: ${t}s`;
    clearInterval(timerId);
    timerId = setInterval(() => {
      t--;
      questionTimerDisplay.textContent = `Čas: ${t}s`;
      if(t <= 0) {
        clearInterval(timerId);
        handleWrong();
      }
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerId);
  }

  function updateUI() {
    livesDisplay.textContent = `Životy: ${lives}`;
    scoreDisplay.textContent = `Skóre: ${score}`;
  }

  function gameOver() {
    stopTimer();
    vtipDisplay.style.display = 'none';
    moznostiDisplay.style.display = 'none';
    document.getElementById("info").style.display = 'none';
    endScreen.style.display = 'block';
    finalScoreDisplay.textContent = score;
  }

  function nextQuestion() {
    if(lives <= 0 || used.length === vtipy.length) {
      gameOver();
      return;
    }

    stopTimer();
    moznostiDisplay.innerHTML = '';
    vtipDisplay.style.display = 'block';

    let idx;
    do {
      idx = Math.floor(Math.random() * vtipy.length);
    } while (used.includes(idx));
    used.push(idx);

    const q = vtipy[idx];
    vtipDisplay.textContent = q.text;

    const options = [q.answer, ...q.wrong];
    shuffle(options);

    options.forEach(opt => {
      const b = document.createElement('button');
      b.textContent = opt;
      b.onclick = () => {
        if(b.classList.contains('disabled')) return;
        stopTimer();
        Array.from(moznostiDisplay.children).forEach(x => x.classList.add('disabled'));

        if(opt === q.answer) {
          b.classList.add('correct');
          soundCorrect.play();
          score++;
          // Přidávání života za každých 5 celkových bodů
          if(score % 5 === 0 && lives < maxLives) {
            lives++;
          }
          // Zrychlení času s každou otázkou, minimálně 5 sekund
          timePerQuestion = Math.max(5, timePerQuestion - 0.25);

          updateUI();
          setTimeout(nextQuestion, 1200);
        } else {
          b.classList.add('wrong');
          soundWrong.play();
          // Zvýraznění správné odpovědi po špatné
          Array.from(moznostiDisplay.children).forEach(btn => {
            if(btn.textContent === q.answer) {
              btn.classList.add('correct');
            }
          });
          handleWrong();
        }
      };
      moznostiDisplay.appendChild(b);
    });

    updateUI();
    startTimer();
  }

  function handleWrong() {
    lives--;
    updateUI();
    if(lives <= 0) {
      gameOver();
    } else {
      setTimeout(nextQuestion, 1200);
    }
  }

  saveScoreBtn.onclick = () => {
    const name = playerNameInput.value.trim();
    if(!name) {
      alert("Zadej jméno!");
      return;
    }
    alert(`Skóre uložené: ${name} – ${score} bodů`);
  };

  restartBtn.onclick = () => {
    score = 0;
    lives = maxLives;
    used = [];
    timePerQuestion = 40;
    endScreen.style.display = 'none';
    document.getElementById("info").style.display = 'flex';
    vtipDisplay.style.display = 'block';
    moznostiDisplay.style.display = 'flex';
    updateUI();
    nextQuestion();
  };

  updateUI();
  nextQuestion();
})();
</script>

</body>
</html>
